<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts | é˜¿æ–‡çš„ç½‘ç»œç©ºé—´</title><link>/post/</link><atom:link href="/post/index.xml" rel="self" type="application/rss+xml"/><description>Posts</description><generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>zh-Hans</language><lastBuildDate>Thu, 28 Nov 2019 15:39:43 +0800</lastBuildDate><image><url>/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_2.png</url><title>Posts</title><link>/post/</link></image><item><title>å¦‚ä½•åˆ›å»ºä¸€ä¸ª Vue.js æ’ä»¶</title><link>/post/2019/2019-11-28-how-to-create-a-plugin-of-vue.js/</link><pubDate>Thu, 28 Nov 2019 15:39:43 +0800</pubDate><guid>/post/2019/2019-11-28-how-to-create-a-plugin-of-vue.js/</guid><description>&lt;h2 id="vuejs-æ’ä»¶ä»‹ç»">Vue.js æ’ä»¶ä»‹ç»&lt;/h2>
&lt;p>Vue.js æ’ä»¶ä»¥ä¸€ç§æ›´ä¼˜é›…çš„æ–¹å¼æ¥ä¸º Vue æ·»åŠ å…¨å±€åŠŸèƒ½ã€‚&lt;/p>
&lt;p>æ’ä»¶çš„ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨ &lt;code>new Vue()&lt;/code> ä¹‹å‰é€šè¿‡ Vue.js æä¾›çš„ &lt;code>use&lt;/code> æ–¹æ³•æ¥æ³¨å†Œï¼ˆå¯ç”¨ï¼‰æ’ä»¶å³å¯ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">import MyPlugin from &amp;quot;MyPlugin&amp;quot;;
// è¦åœ¨ new Vue() ä¹‹å‰è°ƒç”¨ use æ–¹æ³•
Vue.use(MyPlugin)
// ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯é€‰çš„é€‰é¡¹å¯¹è±¡
Vue.use(MyPlugin, { someOption: true })
&lt;/code>&lt;/pre>
&lt;h2 id="å¦‚ä½•è‡ªå·±å¼€å‘ä¸€ä¸ªæ’ä»¶">å¦‚ä½•è‡ªå·±å¼€å‘ä¸€ä¸ªæ’ä»¶&lt;/h2>
&lt;p>ä¸Šé¢è®²åˆ°ï¼Œé€šè¿‡ &lt;code>Vue.use&lt;/code> æ–¹æ³•æ¥æ³¨å†Œæ’ä»¶ï¼Œ &lt;code>Vue.use&lt;/code> æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ’ä»¶ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªå¯é€‰çš„é€‰é¡¹å¯¹è±¡&lt;/p>
&lt;pre>&lt;code class="language-js">Vue.use(MyPlugin, { someOption: true })
&lt;/code>&lt;/pre>
&lt;p>è€Œ &lt;code>Vue.use&lt;/code> æ–¹æ³•æ‰§è¡Œæ—¶æ˜¯è°ƒç”¨ç”± &lt;code>MyPlugin&lt;/code> æä¾›çš„ &lt;code>install&lt;/code> æ–¹æ³•ï¼Œå› æ­¤ä¸Šé¢ä»£ç ç›¸å½“äºï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">MyPlugin.install(Vue, { someOption: true })
&lt;/code>&lt;/pre>
&lt;p>&lt;code>install&lt;/code> æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œ&lt;code>Vue&lt;/code> æ„é€ å‡½æ•°å’Œè°ƒç”¨æ’ä»¶æ—¶ä¼ å…¥çš„å¯é€‰çš„é€‰é¡¹å¯¹è±¡ã€‚&lt;/p>
&lt;p>å› æ­¤ï¼Œåªè¦æ˜¯ä¸€ä¸ªå‘å¤–æš´éœ² &lt;code>install&lt;/code> æ–¹æ³•çš„æ¨¡å—ï¼Œå°±å¯ä»¥ä½œä¸º Vue çš„æ’ä»¶ï¼Œä¾‹å¦‚ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">// MyPlugin.js
MyPlugin.install = function (Vue, options) {
console.log('hello, MyPlugin');
}
export default MyPlugin;
&lt;/code>&lt;/pre>
&lt;p>è¿™ä¾¿æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ Vue.js æ’ä»¶äº†ã€‚&lt;/p>
&lt;p>å½“ç„¶ï¼Œæˆ‘ä»¬å¼€å‘æ’ä»¶ä¸å¯èƒ½åªæ˜¯ä¸ºäº†æ‰“å°ä¸€å¥è¯ï¼Œè€Œæ˜¯æœ‰æ›´é‡è¦çš„ä½¿å‘½ç­‰å¾…æˆ‘ä»¬å»å®Œæˆï¼Œå› ä¸º &lt;code>install&lt;/code> æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ &lt;code>Vue&lt;/code> æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ä½ å¯ä»¥å›´ç»•ç€ &lt;code>Vue&lt;/code> æ¥æ‰©å±•æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¦å¤– &lt;code>install&lt;/code> ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ªé…ç½®é€‰é¡¹å¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥ä½¿ä½ æä¾›çš„åŠŸèƒ½æ›´åŠ çµæ´»æ›´å…·æœ‰å¯é…ç½®æ€§ã€‚&lt;/p>
&lt;pre>&lt;code class="language-js">MyPlugin.install = function (Vue, options) {
// 1. æ·»åŠ å…¨å±€æ–¹æ³•æˆ–å±æ€§
Vue.myGlobalMethod = function () {
// é€»è¾‘...
}
// 2. æ·»åŠ å…¨å±€èµ„æº
Vue.directive('my-directive', {
bind (el, binding, vnode, oldVnode) {
// é€»è¾‘...
}
})
// 3. æ³¨å…¥ç»„ä»¶é€‰é¡¹
Vue.mixin({
created: function () {
// é€»è¾‘...
}
})
// 4. æ·»åŠ å®ä¾‹æ–¹æ³•
Vue.prototype.$myMethod = function (methodOptions) {
// é€»è¾‘...
}
}
&lt;/code>&lt;/pre>
&lt;p>ps: æœ‰çš„åŒå­¦æ‹…å¿ƒæ’ä»¶ä¼šè¢«å¤šæ¬¡æ³¨å†Œï¼Œå…¶å® &lt;code>Vue.use&lt;/code> ä¼šè‡ªåŠ¨é˜»æ­¢å¤šæ¬¡æ³¨å†Œç›¸åŒæ’ä»¶ï¼Œå±Šæ—¶å³ä½¿å¤šæ¬¡è°ƒç”¨ä¹Ÿåªä¼šæ³¨å†Œä¸€æ¬¡è¯¥æ’ä»¶ã€‚&lt;/p>
&lt;h2 id="live-demos">live demos&lt;/h2>
&lt;p>æˆ‘ä»¬å¸¸è§çš„åº“
&lt;a href="https://element.eleme.cn/#/zh-CN/component/quickstart#wan-zheng-yin-ru" target="_blank" rel="noopener">Element UI&lt;/a> ä¹Ÿæ˜¯ä»¥æ’ä»¶å½¢å¼å¼•å…¥ï¼Œè€Œä¸”ç»„ä»¶åº“å†…éƒ¨çš„å•ä¸ªç»„ä»¶ä¹Ÿéƒ½æ˜¯æ’ä»¶å½¢å¼å­˜åœ¨ï¼Œå¦‚
&lt;a href="https://github.com/ElemeFE/element/blob/dev/packages/button/index.js" target="_blank" rel="noopener">ElButton&lt;/a>&lt;/p>
&lt;p>å¦å¤–ï¼Œ
&lt;a href="https://github.com/vuejs/awesome-vue#components--libraries" target="_blank" rel="noopener">awesome-vue&lt;/a> é›†åˆäº†å¤§é‡ç”±ç¤¾åŒºè´¡çŒ®çš„æ’ä»¶å’Œåº“ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œç ”ç©¶å­¦ä¹ ã€‚&lt;/p>
&lt;h2 id="ç›¸å…³é“¾æ¥">ç›¸å…³é“¾æ¥ï¼š&lt;/h2>
&lt;ul>
&lt;li>
&lt;a href="https://element.eleme.cn/#/zh-CN/component/quickstart#wan-zheng-yin-ru" target="_blank" rel="noopener">Element UI æ–‡æ¡£&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://github.com/ElemeFE/element" target="_blank" rel="noopener">Element UI æºç &lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://cn.vuejs.org/v2/guide/plugins.html" target="_blank" rel="noopener">æ’ä»¶ - Vue.js æ–‡æ¡£&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>æœ¬æ–‡å®Œï¼Œæ„Ÿè°¢é˜…è¯»ã€‚ğŸ˜œ&lt;/p></description></item><item><title>Request Methods With Axios</title><link>/post/2019/2019-11-22-request-methods-with-axios/</link><pubDate>Fri, 22 Nov 2019 15:46:45 +0800</pubDate><guid>/post/2019/2019-11-22-request-methods-with-axios/</guid><description>&lt;p>Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­&lt;/p>
&lt;p>Axios æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>æ”¯æŒæµè§ˆå™¨å’Œnode.js&lt;/li>
&lt;li>æ”¯æŒpromise&lt;/li>
&lt;li>èƒ½æ‹¦æˆªè¯·æ±‚å’Œå“åº”&lt;/li>
&lt;li>èƒ½è½¬æ¢è¯·æ±‚å’Œå“åº”æ•°æ®&lt;/li>
&lt;li>èƒ½å–æ¶ˆè¯·æ±‚&lt;/li>
&lt;li>è‡ªåŠ¨è½¬æ¢JSONæ•°æ®&lt;/li>
&lt;li>æµè§ˆå™¨ç«¯æ”¯æŒé˜²æ­¢CSRF(è·¨ç«™è¯·æ±‚ä¼ªé€ )&lt;/li>
&lt;/ul>
&lt;p>axios çš„è¯¦ç»†ä½¿ç”¨éƒ½å¯ä»¥åœ¨
&lt;a href="https://github.com/axios/axios" target="_blank" rel="noopener">https://github.com/axios/axios&lt;/a> ä¸­çœ‹åˆ°ï¼Œæœ¬æ–‡ä¸»è¦å°†åœ¨é¡¹ç›®å®è·µä¸­å¦‚ä½•è¿›ä¸€æ­¥å°è£… axios ï¼Œä½¿å¾— axios æ›´ç¬¦åˆå®é™…éœ€æ±‚ã€‚&lt;/p>
&lt;h2 id="å°è£…æ­¥éª¤">å°è£…æ­¥éª¤&lt;/h2>
&lt;h3 id="å…¨å±€é…ç½®">å…¨å±€é…ç½®&lt;/h3>
&lt;p>å…¨å±€é…ç½®æ˜¯æŒ‡é…ç½® &lt;code>baseURL&lt;/code> &lt;code>timeout&lt;/code> ç­‰é€‰é¡¹ã€‚&lt;/p>
&lt;p>å…¨å±€é…ç½®ä¼šå½±å“åˆ°æ¯ä¸ªè¯·æ±‚ï¼Œå¯ä»¥ç›´æ¥å¯¹ axios é…ç½®ï¼Œä¹Ÿå¯ä»¥åˆ›å»º axios çš„å®ä¾‹ï¼Œå¯¹å®ä¾‹è¿›è¡Œé…ç½®ã€‚&lt;/p>
&lt;p>axios å’Œ axios å®ä¾‹çš„åŒºåˆ«å°±åœ¨äºï¼Œaxios å¯ä»¥åˆ›å»ºå¤šä¸ªå®ä¾‹ï¼Œä¸åŒå®ä¾‹ä¹‹é—´çš„é…ç½®å¯ä»¥ä¸åŒï¼Œå¹¶ä¸”ä¸ä¼šå½±å“åˆ° axios è¿™ä¸ªæºå¤´ã€‚&lt;/p>
&lt;p>ç›´æ¥é…ç½® axiosï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">axios.defaults.baseURL = 'https://api.example.com';
axios.defaults.timeout = 2000;
&lt;/code>&lt;/pre>
&lt;p>æˆ–è€…é…ç½® axios å®ä¾‹ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">import axios from &amp;quot;axios&amp;quot;;
// åˆ›å»º axios å®ä¾‹
const request = axios.create({
baseURL: &amp;quot;https://api.example.com&amp;quot;,
timeout: 2000, // è¯·æ±‚è¶…æ—¶æ—¶é—´
});
&lt;/code>&lt;/pre>
&lt;h3 id="æ‹¦æˆªå™¨">æ‹¦æˆªå™¨&lt;/h3>
&lt;p>axios æ‹¦æˆªå™¨åˆ†ä¸ºã€Œè¯·æ±‚æ‹¦æˆªå™¨ã€å’Œã€Œå“åº”æ‹¦æˆªå™¨ã€ï¼Œå®ƒä»¬ç›¸å½“äºæ˜¯é¡¹ç›® http è¯·æ±‚çš„å¤§é—¨ã€‚&lt;/p>
&lt;p>æ¯æ¬¡å‘é€è¯·æ±‚æ—¶è¦ç»è¿‡ã€Œè¯·æ±‚æ‹¦æˆªå™¨ã€è¿™é“é—¨ï¼Œæ¯æ¬¡è¯·æ±‚å¾—åˆ°å“åº”æ—¶ä¹Ÿè¦ç»è¿‡ã€Œå“åº”æ‹¦æˆªå™¨ã€è¿™é“é—¨ã€‚&lt;/p>
&lt;p>æœ‰äº†æ‹¦æˆªå™¨ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹æ¯ä¸ªè¯·æ±‚è¿›è¡Œä¸€äº›å¤„ç†ï¼Œæ¯”å¦‚ï¼š&lt;/p>
&lt;ol>
&lt;li>å‘é€è¯·æ±‚æ—¶ï¼Œåˆ¤æ–­ç”¨æˆ·çš„ç™»å½•çŠ¶æ€æˆ–è€…ç”¨æˆ·æƒé™ï¼Œä¸æ»¡è¶³æ¡ä»¶çš„æˆ–è€…è·³è½¬ç™»å½•é¡µé¢æˆ–è€…å¼¹çª—æç¤º&lt;/li>
&lt;li>å‘é€è¯·æ±‚æ—¶ï¼Œæ·»åŠ ç‰¹å®šçš„ headers&lt;/li>
&lt;li>è¯·æ±‚å¾—åˆ°å“åº”æ—¶ï¼Œæ ¹æ®å“åº”çŠ¶æ€ç åšä¸åŒå¤„ç†ï¼š
&lt;ul>
&lt;li>200: å“åº”æˆåŠŸ&lt;/li>
&lt;li>404: æœªæ‰¾åˆ°èµ„æº&lt;/li>
&lt;li>409: ç”¨æˆ·æ²¡æœ‰ç›¸åº”æƒé™&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;pre>&lt;code class="language-js">import axios from &amp;quot;axios&amp;quot;;
// åˆ›å»º axios å®ä¾‹
const request = axios.create({
baseURL: &amp;quot;[/cmp/v1](https://api.example.com)&amp;quot;,
timeout: 2000 // è¯·æ±‚è¶…æ—¶æ—¶é—´
});
// request æ‹¦æˆªå™¨
request.interceptors.request.use(
confit =&amp;gt; {
// è®¾ç½® tokenï¼Œæˆ–è€…å…¶ä»–è®¾ç½®
config.headers[&amp;quot;token&amp;quot;] = 'token_123';
return config;
},
err =&amp;gt; {
return Promise.reject(err)
},
);
// response æ‹¦æˆªå™¨
request.interceptors.response.use(
resp =&amp;gt; resp.data,
error =&amp;gt; {
if (error.response) {
const data = error.response.data;
let msg = data.desc || data.exception || '';
switch (error.response.status) {
case 401:
// æç¤ºï¼šç™»å½•è¿‡æœŸï¼Œè·³è½¬ç™»å½•é¡µé¢é‡æ–°ç™»å½•
break;
case 403:
// æç¤ºï¼šæƒé™ä¸è¶³
break;
case 404:
// æç¤ºï¼šèµ„æºä¸å­˜åœ¨
break;
default:
// æç¤ºï¼šè¯·æ±‚å¤±è´¥
break;
}
}
return Promise.reject(error);
}
);
&lt;/code>&lt;/pre>
&lt;h3 id="å°è£…å„ç±»å‹è¯·æ±‚">å°è£…å„ç±»å‹è¯·æ±‚&lt;/h3>
&lt;p>è¿™ä¸€æ­¥å°è£…ä¸»è¦æ˜¯ä¸ºäº†ç»Ÿä¸€ axios ä¸­ä¸åŒè¯·æ±‚ç±»å‹çš„å‚æ•°è¦æ±‚ã€‚&lt;/p>
&lt;p>ä»¥ POST å’Œ GET ä¸ºä¾‹ï¼Œå°è£…ä¹‹å‰&lt;/p>
&lt;pre>&lt;code class="language-js">const payload = { ID: 12345 }
// get è¯·æ±‚ï¼Œparams å±æ€§å€¼æ˜¯æºå¸¦çš„å‚æ•°
axios.get('/user', {
params: payload
})
// post è¯·æ±‚
axios.post('/user', payload)
&lt;/code>&lt;/pre>
&lt;p>å°è£…ä¹‹åï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">const payload = { ID: 12345 }
GET('/user', payload)
POST('/user', payload)
&lt;/code>&lt;/pre>
&lt;p>å°è£…ä¹‹åï¼Œæ¯ç§ç±»å‹çš„è¯·æ±‚æ–¹æ³•éƒ½æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šurl å’Œéœ€è¦ä¼ é€’åˆ°æœåŠ¡ç«¯çš„æ•°æ® payloadã€‚&lt;/p>
&lt;p>è¿™é‡Œæˆ‘å°è£…äº† &lt;code>GET&lt;/code> &lt;code>POST&lt;/code> &lt;code>PUT&lt;/code> &lt;code>DELETE&lt;/code> å››ç§æ–¹æ³•ï¼Œåˆ†åˆ«å¯¹åº” &lt;code>get&lt;/code> &lt;code>post&lt;/code> &lt;code>put&lt;/code> &lt;code>delete&lt;/code> ç±»å‹çš„è¯·æ±‚ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">export function GET (url, payload) {
return request.get(url, {
params: payload
});
}
export function POST (url, payload) {
return request.post(url, payload);
}
export function PUT (url, payload) {
return request.put(url, payload);
}
export function DELETE (url, payload) {
return request.delete(url, {
data: payload
});
}
&lt;/code>&lt;/pre>
&lt;p>ä½¿ç”¨æ–¹æ³•ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">// ç¤ºä¾‹ï¼š
import { GET, POST, PUT, DELETE } from '@/utils/request.js'
const payload = { username: 'admin', password: '123456' }
POST('/login', payload)
.then(resp =&amp;gt; {
// è¯·æ±‚æˆåŠŸ
})
.catch(err =&amp;gt; {
// è¯·æ±‚å¤±è´¥
})
.finally {
// æˆåŠŸ/å¤±è´¥éƒ½ä¼šæ‰§è¡Œè¿™é‡Œä»£ç 
}
&lt;/code>&lt;/pre>
&lt;h2 id="å…¶ä»–">å…¶ä»–&lt;/h2>
&lt;h3 id="post-è¯·æ±‚æ•°æ®æ ¼å¼">post è¯·æ±‚æ•°æ®æ ¼å¼&lt;/h3>
&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼Œaxios ä¸­ post è¯·æ±‚çš„ &lt;code>Content-Type&lt;/code> å­—æ®µå¯¹åº”çš„å€¼æ˜¯ &lt;code>application/json&lt;/code> ï¼Œæ­¤æ—¶æ˜¯ä»¥ json æ ¼å¼å‘æœåŠ¡ç«¯å‘é€æ•°æ®ã€‚&lt;/p>
&lt;p>å¦‚æœæƒ³è¦ä»¥ &lt;code>FormData&lt;/code> å½¢å¼å‘é€æ•°æ®ï¼Œä½ å¯ä»¥è¿™æ ·è§£å†³&lt;/p>
&lt;pre>&lt;code class="language-js">import axios from &amp;quot;axios&amp;quot;;
import qs from 'qs';
const data = { 'bar': 123 };
const options = {
url,
method: 'POST',
data: qs.stringify(data),
headers: { 'content-type': 'application/x-www-form-urlencoded' },
};
axios(options);
&lt;/code>&lt;/pre>
&lt;p>é‚£ä¹ˆå‰é¢å¯¹ POST æ–¹æ³•çš„å°è£…ä¹Ÿè¦è¿›è¡Œä¿®æ”¹ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">import qs from 'qs';
export function POST (url, payload) {
const options = {
url,
method: 'POST',
data: qs.stringify(data),
headers: { 'content-type': 'application/x-www-form-urlencoded' },
};
return request(options);
}
&lt;/code>&lt;/pre>
&lt;!--
ç–‘é—®ï¼š
å…¨å±€è®¾ç½®æ˜¯å¦æœ‰æ•ˆ
// è®¾ç½® post è¯·æ±‚çš„ Content-Type
request.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';
-->
&lt;h3 id="æŒ‚è½½åˆ°-vue-åŸå‹ä¸Š">æŒ‚è½½åˆ° vue åŸå‹ä¸Š&lt;/h3>
&lt;pre>&lt;code class="language-js">import { GET, POST, PUT, DELETE } from '@/utils/request.js'
Vue.prototype.$http = {
get: GET,
post: POST,
put: PUT,
delete: DELETE
}
&lt;/code>&lt;/pre>
&lt;p>æŒ‚è½½åˆ°åŸå‹ä¸Šä¹‹åï¼Œå°±å¯ä»¥åœ¨ä»»æ„çš„ vue ç»„ä»¶å†…é€šè¿‡ vue å®ä¾‹è°ƒç”¨è¯·æ±‚ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">this.$http.get('/user', { id: 123 })
&lt;/code>&lt;/pre>
&lt;h2 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç &lt;/h2>
&lt;details>
&lt;summary>
å®Œæ•´çš„ request.js ä»£ç åœ¨æ­¤ï¼Œè¯·ç‚¹å‡»å±•å¼€å®Œæ•´ä»£ç 
&lt;/summary>
&lt;pre>&lt;code class="language-js">// request.js
import axios from &amp;quot;axios&amp;quot;;
// åˆ›å»º axios å®ä¾‹
const request = axios.create({
baseURL: &amp;quot;https://api.example.com&amp;quot;,
timeout: 2000, // è¯·æ±‚è¶…æ—¶æ—¶é—´
});
// request æ‹¦æˆªå™¨
request.interceptors.request.use(
confit =&amp;gt; {
// è®¾ç½® tokenï¼Œæˆ–è€…å…¶ä»–è®¾ç½®
config.headers[&amp;quot;token&amp;quot;] = 'token_123';
return config;
},
err =&amp;gt; {
return Promise.reject(err)
},
);
// response æ‹¦æˆªå™¨
request.interceptors.response.use(
resp =&amp;gt; resp.data,
error =&amp;gt; {
if (error.response) {
const data = error.response.data;
let msg = data.desc || data.exception || '';
switch (error.response.status) {
case 401:
// æç¤ºï¼šç™»å½•è¿‡æœŸï¼Œè·³è½¬ç™»å½•é¡µé¢é‡æ–°ç™»å½•
break;
case 403:
// æç¤ºï¼šæƒé™ä¸è¶³
break;
case 404:
// æç¤ºï¼šèµ„æºä¸å­˜åœ¨
break;
default:
// æç¤ºï¼šè¯·æ±‚å¤±è´¥
break;
}
}
return Promise.reject(error);
}
);
export function GET (url, payload) {
return request.get(url, {
params: payload
});
}
export function POST (url, payload) {
return request.post(url, payload);
}
export function PUT (url, payload) {
return request.put(url, payload);
}
export function PATCH (url, payload) {
return request.patch(url, payload);
}
export function DELETE (url, payload) {
return request.delete(url, {
params: payload
});
}
&lt;/code>&lt;/pre>
&lt;/details>
&lt;hr>
&lt;p>æœ¬æ–‡å®Œï¼Œæ„Ÿè°¢é˜…è¯»ã€‚ğŸ˜œ&lt;/p></description></item><item><title>Get the Beginning and Ending in a Unit of Time via Momentjs</title><link>/post/2019/2019-11-19-get-the-beginning-and-ending-in-a-unit-of-time-via-momentjs/</link><pubDate>Tue, 19 Nov 2019 17:04:31 +0800</pubDate><guid>/post/2019/2019-11-19-get-the-beginning-and-ending-in-a-unit-of-time-via-momentjs/</guid><description>&lt;blockquote>
&lt;p>æ ¹æ® &lt;code>moment.js&lt;/code> å¾—åˆ°ä¸€ä¸ªå•ä½æ—¶é—´æˆ–è€…æ—¶é—´æ®µï¼ˆå¦‚æœ¬å‘¨ï¼Œä¸Šå‘¨ï¼Œæœ¬æœˆï¼Œä¸Šæœˆï¼Œå½“å‰å­£åº¦ï¼Œä¸Šä¸ªå­£åº¦ï¼‰çš„å¼€å§‹ç»“æŸæ—¶é—´&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;a href="https://momentjs.com/" target="_blank" rel="noopener">momentjs æ–‡æ¡£&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ä¸»è¦åˆ©ç”¨ä»¥ä¸‹å‡ é¡¹ APIï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>format()&lt;/code>: å¾—åˆ°æ ¼å¼åŒ–çš„æ—¶é—´&lt;/li>
&lt;li>&lt;code>startOf()&lt;/code>: å¾—åˆ°ä¸€ä¸ªå•ä½æ—¶é—´çš„å¼€å§‹æ—¶é—´ç‚¹ï¼Œ
&lt;a href="https://momentjs.com/docs/#/manipulating/start-of/" target="_blank" rel="noopener">æ–‡æ¡£&lt;/a>&lt;/li>
&lt;li>&lt;code>endOf()&lt;/code>: å¾—åˆ°ä¸€ä¸ªå•ä½æ—¶é—´çš„ç»“æŸæ—¶é—´ç‚¹&lt;/li>
&lt;li>&lt;code>add()&lt;/code>: åœ¨æŒ‡å®šæ—¶é—´ç‚¹çš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šä¸€ä¸ªæ—¶é—´æ®µ&lt;/li>
&lt;li>&lt;code>subtract()&lt;/code>: åœ¨æŒ‡å®šæ—¶é—´ç‚¹çš„åŸºç¡€ä¸Šï¼Œå‡å»ä¸€ä¸ªæ—¶é—´æ®µ&lt;/li>
&lt;li>&lt;code>week()&lt;/code>: è·å–æˆ–è®¾ç½®ä¸€ä¸ªæ—¶é—´å¯¹è±¡çš„å‘¨æ•°ï¼ˆç¬¬å‡ å‘¨ï¼‰&lt;/li>
&lt;li>&lt;code>month()&lt;/code>: è·å–æˆ–è®¾ç½®ä¸€ä¸ªæ—¶é—´å¯¹è±¡çš„æœˆä»½&lt;/li>
&lt;li>&lt;code>quarter()&lt;/code>: è·å–æˆ–è®¾ç½®ä¸€ä¸ªæ—¶é—´å¯¹è±¡çš„å­£åº¦&lt;/li>
&lt;/ul>
&lt;h2 id="å¤©">å¤©&lt;/h2>
&lt;pre>&lt;code class="language-js">// è·å–å½“å¤©å¼€å§‹ç»“æŸæ—¶é—´
function getCurrDays () {
let date = moment()
let start = date.startOf('days').format('YYYY-MM-DD HH:mm:ss')
let end = date.endOf('days').format('YYYY-MM-DD HH:mm:ss')
return [ start, end ]
}
// è·å–æ˜¨å¤©çš„å¼€å§‹ç»“æŸæ—¶é—´
function getYesterday () {
let date = moment().subtract('days',1);
let start = date.startOf('days').format('YYYY-MM-DD HH:mm:ss')
let end = date.endOf('days').format('YYYY-MM-DD HH:mm:ss')
return [ start, end ]
}
// è·å–æ˜å¤©çš„å¼€å§‹ç»“æŸæ—¶é—´
function getTomorrow () {
let date = moment().add('days',1);
let start = date.startOf('days').format('YYYY-MM-DD HH:mm:ss')
let end = date.endOf('days').format('YYYY-MM-DD HH:mm:ss')
return [ start, end ]
}
&lt;/code>&lt;/pre>
&lt;h2 id="å‘¨">å‘¨&lt;/h2>
&lt;p>è·å–æŸä¸€å‘¨ï¼ˆæœ¬å‘¨ï¼Œä¸Šå‘¨ï¼Œä¸‹å‘¨ï¼‰çš„å¼€å§‹ç»“æŸæ—¶é—´ï¼Œä¸€å‘¨ä»å‘¨æ—¥å¼€å§‹åˆ°å‘¨å…­ç»“æŸã€‚&lt;/p>
&lt;pre>&lt;code class="language-js">// æœ¬å‘¨
function getCurrWeekDays () {
let date = moment()
let start = date.startOf('week').format('YYYY-MM-DD HH:mm:ss')
let end = date.endOf('week').format('YYYY-MM-DD HH:mm:ss')
return [ start, end ]
}
// ä¸Šä¸€å‘¨
function getLastWeekDays () {
let date = moment().week(moment().week() - 1)
let start = date.startOf('week').format('YYYY-MM-DD HH:mm:ss')
let end = date.endOf('week').format('YYYY-MM-DD HH:mm:ss')
return [ start, end ]
}
// ä¸‹ä¸€å‘¨
function getNextWeekDays () {
let date = moment().week(moment().week() + 1)
let start = date.startOf('week').format('YYYY-MM-DD HH:mm:ss')
let end = date.endOf('week').format('YYYY-MM-DD HH:mm:ss')
return [ start, end ]
}
&lt;/code>&lt;/pre>
&lt;h2 id="æœˆ">æœˆ&lt;/h2>
&lt;pre>&lt;code class="language-js">// æœ¬æœˆ
function getCurrMonthDays () {
let date = moment()
let start = date.startOf('month').format('YYYY-MM-DD')
let end = date.endOf('month').format('YYYY-MM-DD')
return [ start, end ];
}
// ä¸Šä¸ªæœˆ
function getLastMonthDays () {
let date = moment().month(moment().month() - 1)
let start = date.startOf('month').format('YYYY-MM-DD')
let end = date.endOf('month').format('YYYY-MM-DD')
return [ start, end ];
}
// ä¸‹ä¸ªæœˆ
function getNextMonthDays () {
let date = moment().month(moment().month() + 1)
let start = date.startOf('month').format('YYYY-MM-DD')
let end = date.endOf('month').format('YYYY-MM-DD')
return [ start, end ];
}
&lt;/code>&lt;/pre>
&lt;h2 id="å­£åº¦">å­£åº¦&lt;/h2>
&lt;pre>&lt;code class="language-js">// å½“å‰å­£åº¦
function getCurrQuarter () {
let date = moment()
let start = date.startOf('quarter').format('YYYY-MM-DD')
let end = date.endOf('quarter').format('YYYY-MM-DD')
return [ start, end ];
}
// ä¸Šä¸ªå­£åº¦
function getLastQuarter () {
let date = moment().quarter(moment().quarter() - 1)
let start = date.startOf('quarter').format('YYYY-MM-DD')
let end = date.endOf('quarter').format('YYYY-MM-DD')
return [ start, end ];
}
// ä¸‹ä¸ªå­£åº¦
function getLastQuarter () {
let date = moment().quarter(moment().quarter() + 1)
}
&lt;/code>&lt;/pre>
&lt;h2 id="dry--">DRY -&lt;/h2>
&lt;blockquote>
&lt;p>Don&amp;rsquo;t repeat yourself.&lt;/p>
&lt;/blockquote>
&lt;p>ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªå›ºå®šç»“æ„é‡å¤äº†å¥½å¤šæ¬¡ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">function getX () {
let date = x
let start = date.startOf('æ—¶é—´å•ä½ç±»å‹').format('æ ¼å¼åŒ–')
let end = date.endOf('æ—¶é—´å•ä½ç±»å‹').format('æ ¼å¼åŒ–')
return [ start, end ];
}
&lt;/code>&lt;/pre>
&lt;p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸“é—¨å°è£…ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼ˆæ—¶é—´ï¼Œæ—¶é—´å•ä½ï¼Œæ ¼å¼åŒ–ï¼‰ï¼Œè¿”å›å¼€å§‹å’Œç»“æŸæ—¶é—´ã€‚&lt;/p>
&lt;pre>&lt;code class="language-js">function getDuringTime (date, type, format) {
let start = date.startOf(type).format(format)
let end = date.endOf(type).format(format)
return [ start, end ];
}
&lt;/code>&lt;/pre>
&lt;p>æœ‰äº†æ­¤å·¥å…·å‡½æ•°ï¼Œå°†ä¸Šé¢ä»£ç æ±‡æ€»å¦‚ä¸‹ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">/**
* @param {date} date [momentjs æ—¶é—´å¯¹è±¡]
* @param {String} type [å•ä½æ—¶é—´ç±»å‹]
* @param {String} format [æ—¶é—´æ ¼å¼]
* type å¯ä»¥æ¥æ”¶çš„å€¼ï¼š year, month, quarter, week, isoWeek, day, date, hour, minute, second
*/
function getDuringTime (date=moment(), type='days', format='YYYY-MM-DD HH:mm:ss') {
let start = date.startOf(type).format(format)
let end = date.endOf(type).format(format)
return [ start, end ];
}
// è·å–å½“å¤©å¼€å§‹ç»“æŸæ—¶é—´
function getCurrDays () {
let date = moment()
return getDuringTime(date, 'days', 'YYYY-MM-DD')
}
// è·å–æ˜¨å¤©çš„å¼€å§‹ç»“æŸæ—¶é—´
function getYesterday () {
let date = moment().subtract('days',1)
return getDuringTime(date, 'days', 'YYYY-MM-DD')
}
// è·å–æ˜å¤©çš„å¼€å§‹ç»“æŸæ—¶é—´
function getTomorrow () {
let date = moment().add('days',1)
return getDuringTime(date, 'days', 'YYYY-MM-DD')
}
// è·å–æŸä¸€å‘¨ï¼ˆæœ¬å‘¨ï¼Œä¸Šå‘¨ï¼Œä¸‹å‘¨ï¼‰çš„å¼€å§‹ç»“æŸæ—¶é—´ï¼Œä¸€å‘¨ä»å‘¨æ—¥å¼€å§‹åˆ°å‘¨å…­ç»“æŸã€‚
// æœ¬å‘¨
function getCurrWeekDays () {
let date = moment()
return getDuringTime(date, 'week', 'YYYY-MM-DD')
}
// ä¸Šä¸€å‘¨
function getLastWeekDays () {
let date = moment().week(moment().week() - 1)
return getDuringTime(date, 'week', 'YYYY-MM-DD')
}
// ä¸‹ä¸€å‘¨
function getNextWeekDays () {
let date = moment().week(moment().week() + 1)
return getDuringTime(date, 'week', 'YYYY-MM-DD')
}
// æœ¬æœˆ
function getCurrMonthDays () {
let date = moment()
return getDuringTime(date, 'month', 'YYYY-MM-DD')
}
// ä¸Šä¸ªæœˆ
function getLastMonthDays () {
let date = moment().month(moment().month() - 1)
return getDuringTime(date, 'month', 'YYYY-MM-DD')
}
// ä¸‹ä¸ªæœˆ
function getNextMonthDays () {
let date = moment().month(moment().month() + 1)
return getDuringTime(date, 'month', 'YYYY-MM-DD')
}
// å½“å‰å­£åº¦
function getCurrQuarter () {
let date = moment()
return getDuringTime(date, 'quarter', 'YYYY-MM-DD')
}
// ä¸Šä¸ªå­£åº¦
function getLastQuarter () {
let date = moment().quarter(moment().quarter() - 1)
return getDuringTime(date, 'quarter', 'YYYY-MM-DD')
}
// ä¸‹ä¸ªå­£åº¦
function getLastQuarter () {
let date = moment().quarter(moment().quarter() + 1)
return getDuringTime(date, 'quarter', 'YYYY-MM-DD')
}
&lt;/code>&lt;/pre>
&lt;hr>
&lt;p>æœ¬æ–‡å®Œï¼Œæ„Ÿè°¢é˜…è¯»ã€‚ğŸ˜œ&lt;/p></description></item><item><title>Basic Setup for Ubuntu</title><link>/post/2019/2019-11-17-basic-setup-for-ubuntu/</link><pubDate>Sun, 17 Nov 2019 09:49:31 +0800</pubDate><guid>/post/2019/2019-11-17-basic-setup-for-ubuntu/</guid><description>&lt;blockquote>
&lt;p>Ubuntu åŸºç¡€è®¾ç½®ï¼ŒåŒ…å«ä¸€äº›å¸¸ç”¨è½¯ä»¶å®‰è£…ï¼Œé…ç½®æ–‡ä»¶ä¿®æ”¹ç­‰ç­‰ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>è¿™ç¯‡æ–‡ç« çš„æ„ä¹‰åœ¨äºï¼Œå½“ä½ æ‹¿åˆ°ä¸€ä¸ªæ–°çš„ Ubuntu ç³»ç»Ÿä¹‹åï¼Œç›´æ¥æŒ‰ç…§æœ¬æ–‡çš„æ­¥éª¤è¿›è¡Œè®¾ç½®ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªé¡ºæ‰‹çš„å¼€å‘/éƒ¨ç½²ç¯å¢ƒã€‚ä¸å†éœ€è¦é€é¡¹æœç´¢æ¯ä¸ªè½¯ä»¶çš„å®‰è£…æ­¥éª¤äº†ã€‚&lt;/p>
&lt;ul>
&lt;li>è®¾ç½®å›½å†…è½¯ä»¶é•œåƒæº&lt;/li>
&lt;li>node&lt;/li>
&lt;li>git&lt;/li>
&lt;li>docker&lt;/li>
&lt;li>nginx&lt;/li>
&lt;li>oh-my-zsh&lt;/li>
&lt;li>alias&lt;/li>
&lt;li>vim&lt;/li>
&lt;/ul>
&lt;h2 id="è®¾ç½®ç³»ç»Ÿè½¯ä»¶é•œåƒæº">è®¾ç½®ç³»ç»Ÿè½¯ä»¶é•œåƒæº&lt;/h2>
&lt;p>é…ç½®ç³»ç»Ÿæºç¬¬ä¸€ä»¶äº‹æ˜¯ä¿®æ”¹é•œåƒæºï¼Œè¿™æ ·æ–¹ä¾¿åç»­å…¶ä»–è½¯ä»¶çš„å®‰è£…ã€‚åœ¨å›½å†…å¯ä»¥é€‰æ‹©é˜¿é‡Œäº‘çš„æºã€‚&lt;/p>
&lt;pre>&lt;code class="language-bash"># ç¼–è¾‘æºæ–‡ä»¶
sudo vim /etc/apt/sources.list
# åœ¨VIMç¼–è¾‘å™¨å†…æ›¿æ¢é»˜è®¤æºä¸ºé˜¿é‡Œäº‘
:0,$ s/archive.ubuntu.com/mirrors.aliyun.com/
# ä¿å­˜æºæ–‡ä»¶å¹¶é€€å‡º
:wq
&lt;/code>&lt;/pre>
&lt;h2 id="åŒ…ç®¡ç†å·¥å…·å®‰è£…">åŒ…ç®¡ç†å·¥å…·å®‰è£…&lt;/h2>
&lt;p>&lt;strong>å…ˆæ›´æ–°&lt;/strong>&lt;/p>
&lt;pre>&lt;code class="language-bash">sudo apt update &amp;amp;&amp;amp; apt upgrade -y
&lt;/code>&lt;/pre>
&lt;ul>
&lt;li>
&lt;a href="https://www.sysgeek.cn/apt-vs-apt-get/" target="_blank" rel="noopener">Linuxä¸­aptä¸apt-getå‘½ä»¤çš„åŒºåˆ«ä¸è§£é‡Š&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.cnblogs.com/fenglongyu/p/8654991.html" target="_blank" rel="noopener">linuxå‘½ä»¤ç³»åˆ— sudo apt-get updateå’Œupgradeçš„åŒºåˆ«&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>å®‰è£…å¸¸ç”¨è½¯ä»¶&lt;/strong>&lt;/p>
&lt;p>é€šå¸¸ä¼šæœ‰ä¸€äº›æ˜¯é»˜è®¤å®‰è£…çš„ï¼Œæ¯”å¦‚ git vim wget curl vimï¼Œå¦‚æœæ²¡æœ‰ï¼Œç”¨ä¸‹é¢æ–¹å¼å®‰è£…å³å¯ã€‚&lt;/p>
&lt;pre>&lt;code class="language-bash">sudo apt install zsh nginx tree -y
&lt;/code>&lt;/pre>
&lt;h2 id="oh-my-zsh">oh-my-zsh&lt;/h2>
&lt;p>å…³äº zsh å’Œ oh-my-zsh å¯ä»¥å‚è€ƒï¼š
&lt;a href="https://zhuanlan.zhihu.com/p/19556676" target="_blank" rel="noopener">ç»ˆæ Shellâ€”â€”ZSH&lt;/a>&lt;/p>
&lt;h3 id="å®‰è£…">å®‰è£…&lt;/h3>
&lt;p>è„šæœ¬å®‰è£…ï¼š&lt;/p>
&lt;pre>&lt;code class="language-bash">wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh
&lt;/code>&lt;/pre>
&lt;p>æˆ–è€…æ‰‹åŠ¨å®‰è£…:&lt;/p>
&lt;pre>&lt;code class="language-bash">git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh
cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc
&lt;/code>&lt;/pre>
&lt;p>å®‰è£…å®Œæˆä¹‹åé€€å‡ºå½“å‰ä¼šè¯é‡æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£å³å¯ã€‚&lt;/p>
&lt;h3 id="æ’ä»¶">æ’ä»¶&lt;/h3>
&lt;p>&lt;strong>(1) autojump&lt;/strong>
github åœ°å€
&lt;a href="https://github.com/wting/autojump" target="_blank" rel="noopener">autojump&lt;/a>&lt;/p>
&lt;p>ä¸‹è½½å¹¶æ‰§è¡Œ&lt;/p>
&lt;pre>&lt;code class="language-bash">wget https://github.com/downloads/joelthelion/autojump/autojump_v21.1.2.tar.gz
./install.sh
&lt;/code>&lt;/pre>
&lt;p>æœ€åæŠŠä»¥ä¸‹ä»£ç åŠ å…¥.zshrc:&lt;/p>
&lt;pre>&lt;code class="language-bash">[[ -s ~/.autojump/etc/profile.d/autojump.sh ]] &amp;amp;&amp;amp; . ~/.autojump/etc/profile.d/autojump.sh
&lt;/code>&lt;/pre>
&lt;h2 id="nodenvm">node(nvm)&lt;/h2>
&lt;p>nvm github åœ°å€ï¼š
&lt;a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener">nvm-sh/nvm&lt;/a>&lt;/p>
&lt;h3 id="æ–¹æ³•ä¸€è„šæœ¬å®‰è£…">æ–¹æ³•ä¸€ï¼šè„šæœ¬å®‰è£…&lt;/h3>
&lt;p>æ‰§è¡Œè„šæœ¬&lt;/p>
&lt;pre>&lt;code class="language-bash">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.1/install.sh | bash
# æˆ–è€…
wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.1/install.sh | bash
&lt;/code>&lt;/pre>
&lt;p>æœ€åï¼Œå°†ä¸‹é¢å†…å®¹åˆ†åˆ«æ·»åŠ åˆ° &lt;code>~/.bashrc&lt;/code>, &lt;code>~/.profile&lt;/code>, å’Œ &lt;code>~/.zshrc&lt;/code> æ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;pre>&lt;code>export NVM_DIR=&amp;quot;$([ -z &amp;quot;${XDG_CONFIG_HOME-}&amp;quot; ] &amp;amp;&amp;amp; printf %s &amp;quot;${HOME}/.nvm&amp;quot; || printf %s &amp;quot;${XDG_CONFIG_HOME}/nvm&amp;quot;)&amp;quot;
[ -s &amp;quot;$NVM_DIR/nvm.sh&amp;quot; ] &amp;amp;&amp;amp; \. &amp;quot;$NVM_DIR/nvm.sh&amp;quot; # This loads nvm
&lt;/code>&lt;/pre>
&lt;p>åŠ è½½é…ç½®æ–‡ä»¶ï¼š&lt;/p>
&lt;pre>&lt;code class="language-bash">source ~/.bashrc
&lt;/code>&lt;/pre>
&lt;h3 id="æ–¹æ³•äºŒgit-å®‰è£…">æ–¹æ³•äºŒï¼šgit å®‰è£…&lt;/h3>
&lt;p>å°†ä»£ç å…‹éš†åˆ°ç”¨æˆ·ç›®å½•ä¸‹ï¼š&lt;/p>
&lt;pre>&lt;code class="language-bash">cd ~/
git clone https://github.com/nvm-sh/nvm.git .nvm
&lt;/code>&lt;/pre>
&lt;p>åˆ‡æ¢åˆ°æœ€æ–°ç‰ˆæœ¬&lt;/p>
&lt;pre>&lt;code class="language-bash">cd ~/.nvm
git checkout v0.35.1
&lt;/code>&lt;/pre>
&lt;p>æ¿€æ´» nvmï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œï¼š&lt;/p>
&lt;pre>&lt;code class="language-bash">. nvm.sh
&lt;/code>&lt;/pre>
&lt;p>æœ€åï¼Œå°†ä¸‹é¢å†…å®¹åˆ†åˆ«æ·»åŠ åˆ° &lt;code>~/.bashrc&lt;/code>, &lt;code>~/.profile&lt;/code>, å’Œ &lt;code>~/.zshrc&lt;/code> æ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;pre>&lt;code>export NVM_DIR=&amp;quot;$HOME/.nvm&amp;quot;
[ -s &amp;quot;$NVM_DIR/nvm.sh&amp;quot; ] &amp;amp;&amp;amp; \. &amp;quot;$NVM_DIR/nvm.sh&amp;quot; # This loads nvm
[ -s &amp;quot;$NVM_DIR/bash_completion&amp;quot; ] &amp;amp;&amp;amp; \. &amp;quot;$NVM_DIR/bash_completion&amp;quot; # This loads nvm bash_completion
&lt;/code>&lt;/pre>
&lt;p>å®Œæˆä¹‹åï¼Œé€šè¿‡ &lt;code>nvm -v&lt;/code> æŸ¥çœ‹ç‰ˆæœ¬æ¥éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸã€‚&lt;/p>
&lt;h2 id="docker">docker&lt;/h2>
&lt;h3 id="å®‰è£…-docker">å®‰è£… Docker&lt;/h3>
&lt;pre>&lt;code class="language-bash">curl -fsSL https://get.docker.com -o get-docker.sh &amp;amp;&amp;amp; sudo sh get-docker.sh
&lt;/code>&lt;/pre>
&lt;h3 id="å®‰è£…-compose">å®‰è£… Compose&lt;/h3>
&lt;pre>&lt;code class="language-bash">sudo curl -L &amp;quot;https://github.com/docker/compose/releases/download/1.22.0/docke-compose-$(uname -s)-$(uname -m)&amp;quot; -o /usr/local/bin/docker-compose
# ç»™Docker Compose æ‰§è¡Œæƒé™
sudo chmod +x /usr/local/bin/docker-compose
#æŸ¥çœ‹Dockerå’ŒDocker Composeçš„ç‰ˆæœ¬
sudo docker version
sudo docker-compose version
&lt;/code>&lt;/pre>
&lt;h3 id="è®¾ç½®é•œåƒæº">è®¾ç½®é•œåƒæº&lt;/h3>
&lt;p>æ‰§è¡Œä¸‹é¢å‘½ä»¤è¿›è¡Œè®¾ç½®&lt;/p>
&lt;p>&lt;em>ps: é˜¿é‡Œäº‘é•œåƒæºæ˜¯ä¸ªäººæ³¨å†Œé˜¿é‡Œäº‘è´¦å·ä¹‹ååˆ†é…çš„ä¸ªäººä¸“å±é•œåƒæºã€‚&lt;/em>&lt;/p>
&lt;pre>&lt;code class="language-bash">sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json &amp;lt;&amp;lt;-'EOF'
{
&amp;quot;registry-mirrors&amp;quot;: [&amp;quot;https://oojjt1xs.mirror.aliyuncs.com&amp;quot;]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
&lt;/code>&lt;/pre>
&lt;h2 id="vim-é…ç½®">vim é…ç½®&lt;/h2>
&lt;p>æœ‰äº›ç³»ç»Ÿé»˜è®¤æ²¡æœ‰å®‰è£…&lt;/p>
&lt;p>é…ç½®æ–‡ä»¶è·¯å¾„ï¼š&lt;/p>
&lt;ul>
&lt;li>å…¨å±€é…ç½®æ–‡ä»¶ï¼š&lt;code>/etc/vim/vimrc&lt;/code>&lt;/li>
&lt;li>å½“å‰ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼š&lt;code>~/.vimrc&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>å°†ä¸‹é¢å†…å®¹ç²˜è´´åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼š&lt;/p>
&lt;pre>&lt;code>&amp;quot; å·¦å•å¼•å·è¡¨ç¤ºå•è¡Œæ³¨é‡Š
&amp;quot; ç¼–ç æŒ‡å®š UTF-8
set fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936
set termencoding=utf-8
set encoding=utf-8
set number &amp;quot; æ˜¾ç¤ºè¡Œå·
set cursorline &amp;quot; çªå‡ºæ˜¾ç¤ºå½“å‰è¡Œ
set ruler &amp;quot; æ‰“å¼€çŠ¶æ€æ æ ‡å°º
&lt;/code>&lt;/pre>
&lt;h2 id="è®¾ç½®åˆ«åalias">è®¾ç½®åˆ«å(alias)&lt;/h2>
&lt;p>å°†æ‰€æœ‰çš„åˆ«åæ”¾åœ¨å•ç‹¬ä¸€ä¸ªæ–‡ä»¶ &lt;code>.bash_aliases&lt;/code> ä¸­ï¼Œè¿™æ ·æ›´åŠ æ–¹ä¾¿ç®¡ç†ï¼Œubuntu ä¹Ÿæ¨èè¿™ç§åšæ³•ã€‚&lt;/p>
&lt;pre>&lt;code class="language-bash">if [ -f ~/.bash_aliases ]; then
. ~/.bash_aliases
fi
&lt;/code>&lt;/pre>
&lt;p>&lt;strong>æ³¨æ„ï¼šç­‰å·ä¸¤ä¾§ä¸èƒ½æœ‰ç©ºæ ¼!&lt;/strong>&lt;/p>
&lt;pre>&lt;code class="language-bash"># ä»£æ›¿é”®ç›˜ä¸Šéš¾ä»¥è§¦åŠçš„ ~ é”®
alias home=&amp;quot;cd ~&amp;quot;
# åŒæ ·ä¹Ÿå¯ä»¥ä¸ºä¸€äº›æ·±å±‚å´å¾ˆå¸¸ç”¨çš„ç›®å½•è®¾ç½®åˆ«å
# å¦‚ï¼šå®å¡”é¢åŒ…çš„ nginx é…ç½®ç›®å½•
alias ng=&amp;quot;cd /www/server/panel/vhost/nginx&amp;quot;
# å›é€€å¤šçº§ç›®å½•
alias bk1=&amp;quot;cd ..&amp;quot;
alias bk2=&amp;quot;cd ../..&amp;quot;
alias bk3=&amp;quot;cd ../../..&amp;quot;
alias bk4=&amp;quot;cd ../../../..&amp;quot;
alias bk5=&amp;quot;cd ../../../../..&amp;quot;
# ls ç›¸å…³
alias cls='clear'
alias ll='ls -l'
alias la='ls -a'
# git ç›¸å…³
alias gs='git status'
alias glog=&amp;quot;git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Cr eset %s %Cgreen(%cr) %C(bold blue)&amp;lt;%an&amp;gt;%Creset' --abbrev-commit&amp;quot;
# è§£å‹
alias -s gz='tar -xzvf'
alias -s tgz='tar -xzvf'
alias -s zip='unzip'
alias -s bz2='tar -xjvf'
# other
alias vi='vim'
alias grep=&amp;quot;grep --color=auto&amp;quot;
alias tree=&amp;quot;tree -I '*svn|*node_module*'&amp;quot;
&lt;/code>&lt;/pre>
&lt;hr>
&lt;p>æœ¬æ–‡å®Œï¼Œæ„Ÿè°¢é˜…è¯»ã€‚ğŸ˜œ&lt;/p></description></item><item><title>Basic Usage of Nginx</title><link>/post/2019/2019-11-16-basic-usage-of-nginx/</link><pubDate>Sat, 16 Nov 2019 11:16:00 +0800</pubDate><guid>/post/2019/2019-11-16-basic-usage-of-nginx/</guid><description>&lt;h2 id="å®‰è£…">å®‰è£…&lt;/h2>
&lt;pre>&lt;code class="language-bash"># ubuntu
sudoÂ aptÂ installÂ nginxÂ -y
&lt;/code>&lt;/pre>
&lt;h2 id="å‘½ä»¤">å‘½ä»¤&lt;/h2>
&lt;h3 id="nginxå‘½ä»¤">nginxÂ å‘½ä»¤&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th align="left">æè¿°&lt;/th>
&lt;th align="left">å‘½ä»¤&lt;/th>
&lt;th align="left">å‘½ä»¤äºŒ&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td align="left">å¯åŠ¨&lt;/td>
&lt;td align="left">&lt;code>sudoÂ nginx&lt;/code>&lt;/td>
&lt;td align="left">&lt;code>sudo /usr/sbin/nginx&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">åœæ­¢&lt;/td>
&lt;td align="left">&lt;code>sudoÂ nginxÂ -sÂ stop&lt;/code>&lt;/td>
&lt;td align="left">&lt;code>sudo /usr/sbin/nginx -s stop&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">é‡å¯&lt;/td>
&lt;td align="left">&lt;code>sudoÂ nginxÂ -sÂ restart&lt;/code>&lt;/td>
&lt;td align="left">&lt;code>sudo /usr/sbin/nginx -s restart&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">é‡è½½é…ç½®æ–‡ä»¶&lt;/td>
&lt;td align="left">&lt;code>sudoÂ nginxÂ -sÂ reload&lt;/code>&lt;/td>
&lt;td align="left">&lt;code>sudo /usr/sbin/nginxÂ -s reload&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="nginxç›®å½•">nginxÂ ç›®å½•&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th align="left">æè¿°&lt;/th>
&lt;th align="left">å‘½ä»¤&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td align="left">nginxÂ å®‰è£…ç›®å½•&lt;/td>
&lt;td align="left">&lt;code>/usr/sbin/nginx&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">é»˜è®¤ç½‘ç«™æ ¹ç›®å½•&lt;/td>
&lt;td align="left">&lt;code>/usr/share/nginx/html&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">é…ç½®æ–‡ä»¶&lt;/td>
&lt;td align="left">&lt;code>/etc/nginx/nginx.confÂ &lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="æŸ¥æ‰¾nginxå®‰è£…ç›®å½•çš„å‘½ä»¤">æŸ¥æ‰¾Â nginxÂ å®‰è£…ç›®å½•çš„å‘½ä»¤&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th align="left">æè¿°&lt;/th>
&lt;th align="left">å‘½ä»¤&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td align="left">æŸ¥æ‰¾ nginxÂ å®‰è£…ç›®å½•&lt;/td>
&lt;td align="left">&lt;code>whichÂ nginx&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">æŸ¥æ‰¾ nginxÂ é…ç½®æ–‡ä»¶&lt;/td>
&lt;td align="left">&lt;code>sudoÂ findÂ /Â -nameÂ nginx.conf&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">æ£€æµ‹é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼š&lt;/td>
&lt;td align="left">&lt;code>sudoÂ /usr/sbin/nginxÂ -t&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="å¸¸è§ä½¿ç”¨åœºæ™¯">å¸¸è§ä½¿ç”¨åœºæ™¯&lt;/h2>
&lt;h3 id="ä¸€-é™æ€ç½‘ç«™">(ä¸€) é™æ€ç½‘ç«™&lt;/h3>
&lt;p>æŒ‡å®šåŸŸåå’Œå¯¹åº”çš„ç½‘ç«™æ ¹ç›®å½•ä½ç½®ï¼Œ&lt;code>server_name&lt;/code> å¯ä»¥æ˜¯åŸŸåã€äºŒçº§åŸŸåï¼Œä¹Ÿå¯ä»¥æ˜¯ ip åœ°å€ã€‚&lt;/p>
&lt;pre>&lt;code>server {
listen 80;
server_name demo.example.com;
location / {
root /www/demo/;
index index.html index.htm;
}
}
&lt;/code>&lt;/pre>
&lt;h3 id="äºŒ-åå‘ä»£ç†">(äºŒ) åå‘ä»£ç†&lt;/h3>
&lt;p>åœºæ™¯ï¼š&lt;/p>
&lt;ul>
&lt;li>è§£å†³è·¨åŸŸé—®é¢˜ï¼Œåˆ©ç”¨ nginx æ¥è®¿é—®å…¶ä»–åŸŸåä¸‹çš„æ¥å£&lt;/li>
&lt;li>å½“ docker æœåŠ¡çš„ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºä¸ŠæŸä¸ªç«¯å£ï¼ˆå¦‚ 8080ï¼‰æ—¶ï¼Œå¯ä»¥è®¾ç½®äºŒçº§åŸŸåä»£ç† 8080 ç«¯å£ã€‚&lt;/li>
&lt;/ul>
&lt;pre>&lt;code>server {
server_name docker.example.com;
listen 80;
location / {
proxy_pass http://localhost:8000;
proxy_set_header Host $host;
proxy_set_header X-Forward-For $remote_addr;
}
}
&lt;/code>&lt;/pre>
&lt;h3 id="ä¸‰-è´Ÿè½½å‡è¡¡">(ä¸‰) è´Ÿè½½å‡è¡¡&lt;/h3>
&lt;pre>&lt;code>upstream backend {
server backend1.example.com weight=5;
server backend2.example.com:8080;
server unix:/tmp/backend3;
}
server {
location / {
proxy_pass http://backend;
}
}
&lt;/code>&lt;/pre>
&lt;h2 id="ä¸€äº›å­¦ä¹ èµ„æº">ä¸€äº›å­¦ä¹ èµ„æº&lt;/h2>
&lt;p>
&lt;a href="http://www.nginx.cn/doc/" target="_blank" rel="noopener">Nginxä¸­æ–‡æ–‡æ¡£&lt;/a>&lt;/p></description></item><item><title>JavaScript ä¸­ this æ€»ç»“</title><link>/post/2019/2019-09-29-this-in-javascript/</link><pubDate>Sun, 29 Sep 2019 14:49:00 +0000</pubDate><guid>/post/2019/2019-09-29-this-in-javascript/</guid><description>&lt;p>JavaScript ä¸­çš„ &lt;code>this&lt;/code> æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œå…·ä½“æŒ‡å‘å“ªä¸ªå¯¹è±¡æ˜¯åœ¨å‡½æ•°è¿è¡Œæ—¶çš„ç¯å¢ƒåŠ¨æ€ç»‘å®šçš„ï¼Œè€Œéå‡½æ•°è¢«å£°æ˜æ—¶çš„ç¯å¢ƒã€‚&lt;/p>
&lt;p>ä½†æ˜¯ ES6 æ ‡å‡†æ–°å¢çš„ç®­å¤´å‡½æ•°ä¸­çš„ &lt;code>this&lt;/code> å´æ˜¯ç”±è¢«å£°æ˜çš„ç¯å¢ƒå³ä¸Šä¸‹æ–‡æ¥ç¡®å®šçš„ã€‚&lt;/p>
&lt;p>&lt;code>this&lt;/code> çš„æŒ‡å‘å¤§è‡´åˆ†ä¸ºä¸‹é¢ 5 ç§ï¼š&lt;/p>
&lt;ul>
&lt;li>ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨&lt;/li>
&lt;li>ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨&lt;/li>
&lt;li>ä½œä¸ºæ„é€ å™¨è°ƒç”¨&lt;/li>
&lt;li>é€šè¿‡ &lt;code>call&lt;/code> å’Œ &lt;code>apply&lt;/code> è°ƒç”¨&lt;/li>
&lt;li>ç®­å¤´å‡½æ•°&lt;/li>
&lt;/ul>
&lt;h2 id="æƒ…å†µä¸€ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨">æƒ…å†µä¸€ï¼šä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨&lt;/h2>
&lt;p>å½“å‡½æ•°ä½œä¸ºæ™®é€šå‡½æ•°æˆ–è€…åŒ¿åå‡½æ•°è°ƒç”¨æ—¶ï¼Œ&lt;code>this&lt;/code> æ€»æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ä¸­è¿™ä¸ªå…¨å±€å¯¹è±¡æ˜¯ &lt;code>window&lt;/code>ï¼Œåœ¨ nodejs ä¸­å…¨å±€å¯¹è±¡æ˜¯ &lt;code>global&lt;/code>ï¼Œè¿™é‡Œè®¨è®ºçš„æ˜¯æµè§ˆå™¨ç«¯ï¼Œæ‰€æœ‰ä»£ç éƒ½å¯ä»¥åœ¨ chrome å¼€å‘è€…å·¥å…·çš„ console é¢æ¿ä¸­æ‰§è¡Œã€‚&lt;/p>
&lt;p>ES5 è§„èŒƒæå‡ºäº†ã€Œä¸¥æ ¼æ¨¡å¼ã€ï¼Œåœ¨æ•´ä¸ªè„šæœ¬æ–‡ä»¶ç¬¬ä¸€è¡Œæˆ–è€…å‡½æ•°å†…ç¬¬ä¸€è¡Œæ·»åŠ ä¸€æ¡è¯­å¥ &lt;code>'use strict';&lt;/code> å³å¯å¼€å¯ä¸¥æ ¼æ¨¡å¼ã€‚&lt;/p>
&lt;p>å¦‚æœå¯ç”¨ã€Œä¸¥æ ¼æ¨¡å¼ã€ï¼Œé‚£ä¹ˆ &lt;code>this&lt;/code> å°±ä¸å†æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œè€Œæ˜¯ &lt;code>undefined&lt;/code> ã€‚&lt;/p>
&lt;p>&lt;strong>1) æ™®é€šå‡½æ•°ï¼š&lt;/strong>&lt;/p>
&lt;pre>&lt;code class="language-js">window.name = 'global name';
function printName1 () {
console.log(this === window); // true
console.log(this.name); // &amp;quot;global object&amp;quot;
}
function printName2 () {
&amp;quot;use strict&amp;quot;; // å¯ç”¨ä¸¥æ ¼æ¨¡å¼
console.log(this); // undefined
}
printName1();
printName2();
&lt;/code>&lt;/pre>
&lt;p>&lt;strong>2) åŒ¿åå‡½æ•°ï¼š&lt;/strong>&lt;/p>
&lt;p>åŒ¿åå‡½æ•°è‡ªæ‰§è¡Œï¼Œè¿™ç§å½¢å¼å°è£…å…¬ç”¨åº“çš„æ—¶å€™æœ€å¸¸è§ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">window.name = 'global name';
(function () {
console.log(this === window); // true
console.log(this.name); // &amp;quot;global object&amp;quot;
})()
&lt;/code>&lt;/pre>
&lt;p>ä½œä¸ºå‚æ•°çš„åŒ¿åå‡½æ•°ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">window.name = 'global name';
setTimeout(function () {
console.log(this === window); // true
console.log(this.name); // &amp;quot;global object&amp;quot;
}, 100);
[1, 2, 3].forEach(function (item) {
console.log(item, this.name)
// 1 &amp;quot;global name&amp;quot;
// 2 &amp;quot;global name&amp;quot;
// 3 &amp;quot;global name&amp;quot;
});
&lt;/code>&lt;/pre>
&lt;h2 id="æƒ…å†µäºŒä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨">æƒ…å†µäºŒï¼šä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨&lt;/h2>
&lt;p>å½“å‡½æ•°ä½œä¸ºå¯¹è±¡å½“å±æ€§æ–¹æ³•è°ƒç”¨æ—¶ï¼Œ&lt;code>this&lt;/code> æ€»æŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚&lt;/p>
&lt;pre>&lt;code class="language-js">var obj = {
name: 'obj',
printName: function () {
console.log(this === obj); // true
console.log(this.name); // &amp;quot;obj&amp;quot;
}
}
obj.printName();
&lt;/code>&lt;/pre>
&lt;p>ä½†æ˜¯å¦‚æœä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ–¹æ³•åˆèµ‹å€¼ç»™äº†å…¶ä»–å˜é‡ï¼Œé‚£ä¹ˆ &lt;code>this&lt;/code> å°†å‘ç”Ÿå˜åŒ–ï¼Œå…¶æŒ‡å‘åªæœ‰åœ¨å‡½æ•°æ‰§è¡Œé‚£ä¸€åˆ»æ‰èƒ½ç¡®å®šã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">var obj = {
name: 'obj',
printName: function () {
console.log(this === obj); // true
console.log(this.name); // &amp;quot;obj&amp;quot;
}
}
var myPrintName = obj.printName;
window.name = 'global name';
myPrintName();
// false
// &amp;quot;global name&amp;quot;
&lt;/code>&lt;/pre>
&lt;p>å½“ &lt;code>myPrintName&lt;/code> æ‰§è¡Œæ—¶ï¼Œå°±è¦æŒ‰ç…§æ™®é€šå‡½æ•°æ¥åˆ¤æ–­ &lt;code>this&lt;/code> æŒ‡å‘äº†ã€‚&lt;/p>
&lt;p>å†æ¥ä¸€ä¸ªä¾‹å­ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">var obj = {
name: 'obj',
printName: function () {
console.log(this === obj); // true
console.log(this.name); // &amp;quot;obj&amp;quot;
}
}
var obj2 = {
name: 'obj2',
}
obj2.printName = obj.printName;
obj2.printName();
// false
// &amp;quot;obj2&amp;quot;
&lt;/code>&lt;/pre>
&lt;p>å½“ &lt;code>obj2.printName&lt;/code> æ‰§è¡Œæ—¶ï¼Œ&lt;code>printName&lt;/code> æ˜¯ä½œä¸º &lt;code>obj2&lt;/code> çš„å±æ€§æ–¹æ³•æ¥è°ƒç”¨çš„ï¼Œå› æ­¤ &lt;code>this&lt;/code> æŒ‡å‘ &lt;code>obj2&lt;/code> è¿™ä¸ªå¯¹è±¡ã€‚&lt;/p>
&lt;p>æ‰€ä»¥è¯´ï¼ŒJavaScript ä¸­çš„ this æŒ‡å‘æ— æ³•åœ¨å®šä¹‰æ—¶åˆ¤æ–­ï¼Œåªæœ‰åœ¨å…¶æ‰§è¡Œæ—¶æ‰èƒ½åˆ¤æ–­ã€‚&lt;/p>
&lt;h2 id="æƒ…å†µä¸‰ä½œä¸ºæ„é€ å™¨è°ƒç”¨">æƒ…å†µä¸‰ï¼šä½œä¸ºæ„é€ å™¨è°ƒç”¨&lt;/h2>
&lt;p>åœ¨ JavaScript ä¸­æ²¡æœ‰ã€Œç±»ã€çš„æ¦‚å¿µï¼ˆç›´åˆ° ES6 æ‰æœ‰ç±»çš„å‡ºç°ï¼‰ï¼Œè€Œæ˜¯æŠŠå‡½æ•°ä½œä¸ºæ„é€ å™¨ï¼Œé€šè¿‡ new æ“ä½œç¬¦æ¥ç”Ÿæˆå®ä¾‹ã€‚&lt;/p>
&lt;p>é‚£ä¹ˆåœ¨æ„é€ å‡½æ•°ä¸­ &lt;code>this&lt;/code> å°±æŒ‡å‘æ–°ç”Ÿæˆçš„å®ä¾‹ã€‚&lt;/p>
&lt;pre>&lt;code class="language-js">var MyClass = function () {
// ç»™å®ä¾‹æ·»åŠ  name å±æ€§
this.name = 'myclass'
this.printName = function () {
return this.name
}
}
var obj = new MyClass()
obj.printName() // &amp;quot;myclass&amp;quot;
&lt;/code>&lt;/pre>
&lt;h2 id="æƒ…å†µå››æ˜¾å¼æŒ‡å®š-this">æƒ…å†µå››ï¼šæ˜¾å¼æŒ‡å®š &lt;code>this&lt;/code>&lt;/h2>
&lt;p>å‰é¢çš„å‡ ç§æ–¹æ³•éƒ½æ˜¯è¢«åŠ¨åœ°æ ¹æ®ä»£ç æ‰§è¡Œæ—¶çš„ç¯å¢ƒæ¥åˆ¤æ–­ &lt;code>this&lt;/code> å…·ä½“æŒ‡å‘å“ªé‡Œï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰åŠæ³•ä¸»åŠ¨æŒ‡å®š &lt;code>this&lt;/code> æŒ‡å‘å‘¢ã€‚&lt;/p>
&lt;p>ç­”æ¡ˆå½“ç„¶æ˜¯æœ‰çš„ï¼Œç”šè‡³å®ƒä»¬çš„å‡ºåœºç‡è¿˜ç›¸å½“é«˜ã€‚&lt;/p>
&lt;p>å¸¸è§çš„æ˜¾å¼æŒ‡å®š &lt;code>this&lt;/code> çš„æ–¹æ³•ä¸»è¦æ˜¯ &lt;code>call&lt;/code>ï¼Œ&lt;code>apply&lt;/code> å’Œ &lt;code>bind&lt;/code> æ¥ï¼Œåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­å‡ ä¹ç¦»ä¸å¼€è¿™ä¸‰ä¸ªæ–¹æ³•ã€‚&lt;/p>
&lt;p>å…ˆå®šä¹‰å¦‚ä¸‹å˜é‡ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">window.name = 'global name'
function printName () {
console.log(this.name)
}
var obj1 = { name: 'obj1' }
var obj2 = { name: 'obj2' }
var obj3 = { name: 'obj3' }
&lt;/code>&lt;/pre>
&lt;p>é»˜è®¤æƒ…å†µ this æŒ‡å‘å…¨å±€å¯¹è±¡ window&lt;/p>
&lt;pre>&lt;code class="language-js">printName() // &amp;quot;global name&amp;quot;
&lt;/code>&lt;/pre>
&lt;p>ä½¿ç”¨ &lt;code>call&lt;/code> æ¥æ”¹å˜ &lt;code>this&lt;/code> æŒ‡å‘ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">printName.call(obj1) // &amp;quot;obj1&amp;quot;
&lt;/code>&lt;/pre>
&lt;p>ä½¿ç”¨ &lt;code>apply&lt;/code> æ¥æ”¹å˜ &lt;code>this&lt;/code> æŒ‡å‘ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">printName.apply(obj2) // &amp;quot;obj2&amp;quot;
&lt;/code>&lt;/pre>
&lt;p>ä½¿ç”¨ &lt;code>bind&lt;/code> æ¥æ”¹å˜ &lt;code>this&lt;/code> æŒ‡å‘ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">var printName2 = printName.bind(obj3)
printName2() // &amp;quot;obj3&amp;quot;
&lt;/code>&lt;/pre>
&lt;p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å‡½æ•°ä¹Ÿå¯ä»¥ä¿®æ”¹ this æŒ‡å‘ï¼Œä¾‹å¦‚ï¼šforEach, map, filter, some, every ç­‰ã€‚ä»¥ &lt;code>forEach&lt;/code> ä¸ºä¾‹ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">var obj = { name: 'zwc' }
var arr = [ 1, 2 ]
arr.forEach(function (item, index) {
console.log(item, this)
})
// 1 Window
// 2 Window
arr.forEach(function (item, index) {
console.log(item, this)
}, obj)
// 1 {name: &amp;quot;zwc&amp;quot;}
// 2 {name: &amp;quot;zwc&amp;quot;}
&lt;/code>&lt;/pre>
&lt;p>&lt;code>forEach&lt;/code> ç¬¬ä¸€ä¸ªå‚æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºè¿­ä»£å™¨ï¼Œç”¨æ¥å¤„ç†æ•°ç»„ä¸­æ¯ä¸€é¡¹å…ƒç´ ï¼Œè¿™ä¸ªå‡½æ•°é€šå¸¸æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå‡½æ•°å†…éƒ¨çš„ &lt;code>this&lt;/code> æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚&lt;/p>
&lt;p>&lt;code>forEach&lt;/code> ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯å‚æ•°å‡½æ•°ä¸­çš„ &lt;code>this&lt;/code> æŒ‡å‘ã€‚&lt;/p>
&lt;p>æ ¹æ®æ‰“å°ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œåœ¨ &lt;code>forEach&lt;/code> çš„è¿­ä»£å™¨å‡½æ•°ä¸­çš„ &lt;code>this&lt;/code> å·²ç»æŒ‡å‘äº† &lt;code>obj&lt;/code> ã€‚&lt;/p>
&lt;h2 id="æƒ…å†µäº”es6ç®­å¤´å‡½æ•°">æƒ…å†µäº”ï¼šES6ç®­å¤´å‡½æ•°&lt;/h2>
&lt;h3 id="ç®­å¤´å‡½æ•°ç®€ä»‹">ç®­å¤´å‡½æ•°ç®€ä»‹&lt;/h3>
&lt;p>ES6 å…è®¸ä½¿ç”¨ã€Œç®­å¤´ã€ï¼ˆ=&amp;gt;ï¼‰å®šä¹‰å‡½æ•°ã€‚&lt;/p>
&lt;pre>&lt;code class="language-js">var f = v =&amp;gt; v;
// ç­‰åŒäº
var f = function (v) {
return v;
};
&lt;/code>&lt;/pre>
&lt;p>é™¤äº†å½¢å¼æ›´ç®€æ´ä¹‹å¤–ï¼Œç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ &lt;code>this&lt;/code>ï¼Œè€Œæ˜¯&lt;strong>ä»è‡ªå·±ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€å±‚ç»§æ‰¿ &lt;code>this&lt;/code>&lt;/strong>ã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>ç®­å¤´å‡½æ•°æ€»æ˜¯ä»è‡ªå·±ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€å±‚ç»§æ‰¿ &lt;code>this&lt;/code>ã€‚&lt;/strong>&lt;/p>
&lt;p>ç¥é©¬æ„æ€å‘¢ï¼Ÿæˆ‘çš„ç†è§£å°±æ˜¯ç®­å¤´å‡½æ•°å†…éƒ¨çš„ &lt;code>this&lt;/code> æŒ‡å‘æ°¸è¿œæ˜¯ç®­å¤´å‡½æ•°è¢«å®šä¹‰æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸçš„ &lt;code>this&lt;/code>ï¼Œå¹¶ä¸”æ— æ³•ä¿®æ”¹ã€‚&lt;/p>
&lt;/blockquote>
&lt;h3 id="æ— æ³•ç»‘å®š-this">æ— æ³•ç»‘å®š this&lt;/h3>
&lt;p>ä½¿ç”¨ call æ¥è°ƒç”¨ç®­å¤´å‡½æ•°æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¼šè¢«å¿½ç•¥ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•ä¿®æ”¹ this æŒ‡å‘ã€‚apply å’Œ bind ä¹Ÿæ˜¯åŒæ ·ç°è±¡ã€‚&lt;/p>
&lt;pre>&lt;code class="language-js">var printName = () =&amp;gt; {
console.log(this === window); // true
}
var obj = { name: 'obj' }
printName.call(obj);
&lt;/code>&lt;/pre>
&lt;h3 id="ä¾‹å­ä¸€">ä¾‹å­ä¸€&lt;/h3>
&lt;p>æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œåœ¨ä¸ä½¿ç”¨ç®­å¤´å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çŸ¥é“æ„é€ å™¨å‡½æ•°å†…éƒ¨ this æŒ‡å‘å¯¹è±¡å®ä¾‹ï¼Œè€ŒåŒ¿åå‡½æ•°çš„ this æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡çš„ï¼Œå› æ­¤æƒ³è¦é€šè¿‡å®šæ—¶å™¨æ‰“å°å¯¹è±¡å®ä¾‹çš„ &lt;code>age&lt;/code> å±æ€§ï¼Œåªèƒ½ç”¨ä¸€ä¸ªå˜é‡ &lt;code>self&lt;/code> ä¿å­˜ &lt;code>this&lt;/code> çš„å¼•ç”¨ï¼ˆå³é—­åŒ…ï¼‰&lt;/p>
&lt;pre>&lt;code class="language-js">function Person(){
// æ„é€ å™¨å‡½æ•°å†…éƒ¨ this æŒ‡å‘å¯¹è±¡å®ä¾‹
this.age = 0;
var self = this;
setInterval(function () {
// åŒ¿åå‡½æ•°ä¸­ this æŒ‡å‘å…¨å±€å¯¹è±¡
console.log(self.age++)
}, 1000);
}
var p = new Person();
&lt;/code>&lt;/pre>
&lt;p>ä½¿ç”¨ç®­å¤´å‡½æ•°ä¹‹åï¼Œå› ä¸ºç®­å¤´å‡½æ•°çš„ &lt;code>this&lt;/code> ç»§æ‰¿è‡ªå…¶è¢«å®šä¹‰æ—¶æ‰€åœ¨ç¯å¢ƒçš„ &lt;code>this&lt;/code>ï¼Œåœ¨æœ¬ä¾‹ä¸­è¿™ä¸ª this å°±æ˜¯å®ä¾‹å¯¹è±¡ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">function Person(){
// æ„é€ å™¨å‡½æ•°å†…éƒ¨ this æŒ‡å‘å¯¹è±¡å®ä¾‹
this.age = 0;
setInterval(() =&amp;gt; {
// è¿™é‡Œçš„ this ä¹ŸæŒ‡å‘æ„é€ å‡½æ•°çš„ this
console.log(this.age++)
}, 1000);
}
var p = new Person();
&lt;/code>&lt;/pre>
&lt;h3 id="ä¾‹å­äºŒ">ä¾‹å­äºŒ&lt;/h3>
&lt;p>å†è¯´ä¸€ä¸ªæ›´å®ç”¨çš„ä¾‹å­ï¼šåœ¨ Vue.js ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°&lt;/p>
&lt;pre>&lt;code class="language-js">import axios from 'axios';
export default {
methods: {
fetch () {
axios.get('/userinfo')
.then(resp =&amp;gt; {
this.sayHi(); // this æŒ‡å‘ vue å®ä¾‹
})
.catch(err =&amp;gt; {
this.sayHi(); // this æŒ‡å‘ vue å®ä¾‹
})
},
sayHi () {
setTimeout(() =&amp;gt; {
// this æŒ‡å‘ vue å®ä¾‹
}, 1000);
}
}
}
&lt;/code>&lt;/pre>
&lt;p>ä½¿ç”¨ç®­å¤´å‡½æ•°ä¹‹åï¼Œå†ä¹Ÿæ— éœ€ç¼“å­˜ vue å®ä¾‹ï¼Œåƒæ˜¯ &lt;code>var vm = this;&lt;/code> è¿™ç§ä»£ç ç»Ÿç»Ÿå¯ä»¥æ¶ˆç­æ‰ï¼Œå—¯ï¼Œæ¸…çˆ½ï¼&lt;/p>
&lt;h2 id="ç›¸å…³é“¾æ¥">ç›¸å…³é“¾æ¥&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>
&lt;a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode" target="_blank" rel="noopener">ä¸¥æ ¼æ¨¡å¼ - MDN&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/arrow_functions" target="_blank" rel="noopener">ç®­å¤´å‡½æ•° - MDN&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="http://es6.ruanyifeng.com/#docs/function#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0" target="_blank" rel="noopener">ç®­å¤´å‡½æ•° - ES6 å…¥é—¨&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>åœ¨ç®­å¤´å‡½æ•°å‡ºç°ä¹‹å‰ï¼Œæ¯ä¸€ä¸ªæ–°å‡½æ•°æ ¹æ®&lt;strong>å®ƒæ˜¯è¢«å¦‚ä½•è°ƒç”¨çš„&lt;/strong>æ¥å®šä¹‰è¿™ä¸ªå‡½æ•°çš„ &lt;code>this&lt;/code> å€¼ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æœæ˜¯è¯¥å‡½æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°æˆ–è€…åŒ¿åå‡½æ•°
&lt;ul>
&lt;li>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹çš„å‡½æ•°è°ƒç”¨ä¸‹ï¼Œ&lt;code>this&lt;/code> æŒ‡å‘ &lt;code>undefined&lt;/code>ï¼Œ&lt;/li>
&lt;li>åœ¨éä¸¥æ ¼æ¨¡å¼çš„å‡½æ•°è°ƒç”¨ä¸­ï¼Œ&lt;code>this&lt;/code> æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œæµè§ˆå™¨ä¸­å…¨å±€å¯¹è±¡æ˜¯ &lt;code>window&lt;/code> ï¼Œåœ¨ nodejs ä¸­å…¨å±€å¯¹è±¡æ˜¯ &lt;code>global&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å¦‚æœæ˜¯è¯¥å‡½æ•°æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œ&lt;code>this&lt;/code> æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ˆå®ä¾‹ï¼‰&lt;/li>
&lt;li>å¦‚æœæ˜¯è¯¥å‡½æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œåˆ™å®ƒçš„&lt;code>this&lt;/code> æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªå¯¹è±¡&lt;/li>
&lt;li>æˆ–è€…ä½¿ç”¨ &lt;code>call&lt;/code> &lt;code>apply&lt;/code> ç­‰æ–¹æ³•æ˜¾å¼æŒ‡å®š &lt;code>this&lt;/code> çš„æŒ‡å‘&lt;/li>
&lt;/ul>
&lt;p>åœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œåˆ™æ˜¯æ ¹æ®ç®­å¤´å‡½æ•°ä¸Šä¸‹æ–‡å†³å®šå…¶ this æŒ‡å‘ï¼Œä¸”æ— æ³•ä¿®æ”¹ &lt;code>this&lt;/code> æŒ‡å‘ã€‚&lt;/p>
&lt;hr>
&lt;p>æœ¬æ–‡å®Œï¼Œæ„Ÿè°¢é˜…è¯»ã€‚ğŸ˜œ&lt;/p></description></item></channel></rss>