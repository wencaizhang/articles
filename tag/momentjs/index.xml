<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>momentjs | é˜¿æ–‡çš„ç½‘ç»œç©ºé—´</title><link>/tag/momentjs/</link><atom:link href="/tag/momentjs/index.xml" rel="self" type="application/rss+xml"/><description>momentjs</description><generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>zh-Hans</language><lastBuildDate>Tue, 19 Nov 2019 17:04:31 +0800</lastBuildDate><image><url>/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_2.png</url><title>momentjs</title><link>/tag/momentjs/</link></image><item><title>Get the Beginning and Ending in a Unit of Time via Momentjs</title><link>/post/2019/2019-11-19-get-the-beginning-and-ending-in-a-unit-of-time-via-momentjs/</link><pubDate>Tue, 19 Nov 2019 17:04:31 +0800</pubDate><guid>/post/2019/2019-11-19-get-the-beginning-and-ending-in-a-unit-of-time-via-momentjs/</guid><description>&lt;blockquote>
&lt;p>æ ¹æ® &lt;code>moment.js&lt;/code> å¾—åˆ°ä¸€ä¸ªå•ä½æ—¶é—´æˆ–è€…æ—¶é—´æ®µï¼ˆå¦‚æœ¬å‘¨ï¼Œä¸Šå‘¨ï¼Œæœ¬æœˆï¼Œä¸Šæœˆï¼Œå½“å‰å­£åº¦ï¼Œä¸Šä¸ªå­£åº¦ï¼‰çš„å¼€å§‹ç»“æŸæ—¶é—´&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;a href="https://momentjs.com/" target="_blank" rel="noopener">momentjs æ–‡æ¡£&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ä¸»è¦åˆ©ç”¨ä»¥ä¸‹å‡ é¡¹ APIï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>format()&lt;/code>: å¾—åˆ°æ ¼å¼åŒ–çš„æ—¶é—´&lt;/li>
&lt;li>&lt;code>startOf()&lt;/code>: å¾—åˆ°ä¸€ä¸ªå•ä½æ—¶é—´çš„å¼€å§‹æ—¶é—´ç‚¹ï¼Œ
&lt;a href="https://momentjs.com/docs/#/manipulating/start-of/" target="_blank" rel="noopener">æ–‡æ¡£&lt;/a>&lt;/li>
&lt;li>&lt;code>endOf()&lt;/code>: å¾—åˆ°ä¸€ä¸ªå•ä½æ—¶é—´çš„ç»“æŸæ—¶é—´ç‚¹&lt;/li>
&lt;li>&lt;code>add()&lt;/code>: åœ¨æŒ‡å®šæ—¶é—´ç‚¹çš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šä¸€ä¸ªæ—¶é—´æ®µ&lt;/li>
&lt;li>&lt;code>subtract()&lt;/code>: åœ¨æŒ‡å®šæ—¶é—´ç‚¹çš„åŸºç¡€ä¸Šï¼Œå‡åŽ»ä¸€ä¸ªæ—¶é—´æ®µ&lt;/li>
&lt;li>&lt;code>week()&lt;/code>: èŽ·å–æˆ–è®¾ç½®ä¸€ä¸ªæ—¶é—´å¯¹è±¡çš„å‘¨æ•°ï¼ˆç¬¬å‡ å‘¨ï¼‰&lt;/li>
&lt;li>&lt;code>month()&lt;/code>: èŽ·å–æˆ–è®¾ç½®ä¸€ä¸ªæ—¶é—´å¯¹è±¡çš„æœˆä»½&lt;/li>
&lt;li>&lt;code>quarter()&lt;/code>: èŽ·å–æˆ–è®¾ç½®ä¸€ä¸ªæ—¶é—´å¯¹è±¡çš„å­£åº¦&lt;/li>
&lt;/ul>
&lt;h2 id="å¤©">å¤©&lt;/h2>
&lt;pre>&lt;code class="language-js">// èŽ·å–å½“å¤©å¼€å§‹ç»“æŸæ—¶é—´
function getCurrDays () {
let date = moment()
let start = date.startOf('days').format('YYYY-MM-DD HH:mm:ss')
let end = date.endOf('days').format('YYYY-MM-DD HH:mm:ss')
return [ start, end ]
}
// èŽ·å–æ˜¨å¤©çš„å¼€å§‹ç»“æŸæ—¶é—´
function getYesterday () {
let date = moment().subtract('days',1);
let start = date.startOf('days').format('YYYY-MM-DD HH:mm:ss')
let end = date.endOf('days').format('YYYY-MM-DD HH:mm:ss')
return [ start, end ]
}
// èŽ·å–æ˜Žå¤©çš„å¼€å§‹ç»“æŸæ—¶é—´
function getTomorrow () {
let date = moment().add('days',1);
let start = date.startOf('days').format('YYYY-MM-DD HH:mm:ss')
let end = date.endOf('days').format('YYYY-MM-DD HH:mm:ss')
return [ start, end ]
}
&lt;/code>&lt;/pre>
&lt;h2 id="å‘¨">å‘¨&lt;/h2>
&lt;p>èŽ·å–æŸä¸€å‘¨ï¼ˆæœ¬å‘¨ï¼Œä¸Šå‘¨ï¼Œä¸‹å‘¨ï¼‰çš„å¼€å§‹ç»“æŸæ—¶é—´ï¼Œä¸€å‘¨ä»Žå‘¨æ—¥å¼€å§‹åˆ°å‘¨å…­ç»“æŸã€‚&lt;/p>
&lt;pre>&lt;code class="language-js">// æœ¬å‘¨
function getCurrWeekDays () {
let date = moment()
let start = date.startOf('week').format('YYYY-MM-DD HH:mm:ss')
let end = date.endOf('week').format('YYYY-MM-DD HH:mm:ss')
return [ start, end ]
}
// ä¸Šä¸€å‘¨
function getLastWeekDays () {
let date = moment().week(moment().week() - 1)
let start = date.startOf('week').format('YYYY-MM-DD HH:mm:ss')
let end = date.endOf('week').format('YYYY-MM-DD HH:mm:ss')
return [ start, end ]
}
// ä¸‹ä¸€å‘¨
function getNextWeekDays () {
let date = moment().week(moment().week() + 1)
let start = date.startOf('week').format('YYYY-MM-DD HH:mm:ss')
let end = date.endOf('week').format('YYYY-MM-DD HH:mm:ss')
return [ start, end ]
}
&lt;/code>&lt;/pre>
&lt;h2 id="æœˆ">æœˆ&lt;/h2>
&lt;pre>&lt;code class="language-js">// æœ¬æœˆ
function getCurrMonthDays () {
let date = moment()
let start = date.startOf('month').format('YYYY-MM-DD')
let end = date.endOf('month').format('YYYY-MM-DD')
return [ start, end ];
}
// ä¸Šä¸ªæœˆ
function getLastMonthDays () {
let date = moment().month(moment().month() - 1)
let start = date.startOf('month').format('YYYY-MM-DD')
let end = date.endOf('month').format('YYYY-MM-DD')
return [ start, end ];
}
// ä¸‹ä¸ªæœˆ
function getNextMonthDays () {
let date = moment().month(moment().month() + 1)
let start = date.startOf('month').format('YYYY-MM-DD')
let end = date.endOf('month').format('YYYY-MM-DD')
return [ start, end ];
}
&lt;/code>&lt;/pre>
&lt;h2 id="å­£åº¦">å­£åº¦&lt;/h2>
&lt;pre>&lt;code class="language-js">// å½“å‰å­£åº¦
function getCurrQuarter () {
let date = moment()
let start = date.startOf('quarter').format('YYYY-MM-DD')
let end = date.endOf('quarter').format('YYYY-MM-DD')
return [ start, end ];
}
// ä¸Šä¸ªå­£åº¦
function getLastQuarter () {
let date = moment().quarter(moment().quarter() - 1)
let start = date.startOf('quarter').format('YYYY-MM-DD')
let end = date.endOf('quarter').format('YYYY-MM-DD')
return [ start, end ];
}
// ä¸‹ä¸ªå­£åº¦
function getLastQuarter () {
let date = moment().quarter(moment().quarter() + 1)
}
&lt;/code>&lt;/pre>
&lt;h2 id="dry--">DRY -&lt;/h2>
&lt;blockquote>
&lt;p>Don&amp;rsquo;t repeat yourself.&lt;/p>
&lt;/blockquote>
&lt;p>ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªå›ºå®šç»“æž„é‡å¤äº†å¥½å¤šæ¬¡ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">function getX () {
let date = x
let start = date.startOf('æ—¶é—´å•ä½ç±»åž‹').format('æ ¼å¼åŒ–')
let end = date.endOf('æ—¶é—´å•ä½ç±»åž‹').format('æ ¼å¼åŒ–')
return [ start, end ];
}
&lt;/code>&lt;/pre>
&lt;p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸“é—¨å°è£…ä¸€ä¸ªå‡½æ•°ï¼ŒæŽ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼ˆæ—¶é—´ï¼Œæ—¶é—´å•ä½ï¼Œæ ¼å¼åŒ–ï¼‰ï¼Œè¿”å›žå¼€å§‹å’Œç»“æŸæ—¶é—´ã€‚&lt;/p>
&lt;pre>&lt;code class="language-js">function getDuringTime (date, type, format) {
let start = date.startOf(type).format(format)
let end = date.endOf(type).format(format)
return [ start, end ];
}
&lt;/code>&lt;/pre>
&lt;p>æœ‰äº†æ­¤å·¥å…·å‡½æ•°ï¼Œå°†ä¸Šé¢ä»£ç æ±‡æ€»å¦‚ä¸‹ï¼š&lt;/p>
&lt;pre>&lt;code class="language-js">/**
* @param {date} date [momentjs æ—¶é—´å¯¹è±¡]
* @param {String} type [å•ä½æ—¶é—´ç±»åž‹]
* @param {String} format [æ—¶é—´æ ¼å¼]
* type å¯ä»¥æŽ¥æ”¶çš„å€¼ï¼š year, month, quarter, week, isoWeek, day, date, hour, minute, second
*/
function getDuringTime (date=moment(), type='days', format='YYYY-MM-DD HH:mm:ss') {
let start = date.startOf(type).format(format)
let end = date.endOf(type).format(format)
return [ start, end ];
}
// èŽ·å–å½“å¤©å¼€å§‹ç»“æŸæ—¶é—´
function getCurrDays () {
let date = moment()
return getDuringTime(date, 'days', 'YYYY-MM-DD')
}
// èŽ·å–æ˜¨å¤©çš„å¼€å§‹ç»“æŸæ—¶é—´
function getYesterday () {
let date = moment().subtract('days',1)
return getDuringTime(date, 'days', 'YYYY-MM-DD')
}
// èŽ·å–æ˜Žå¤©çš„å¼€å§‹ç»“æŸæ—¶é—´
function getTomorrow () {
let date = moment().add('days',1)
return getDuringTime(date, 'days', 'YYYY-MM-DD')
}
// èŽ·å–æŸä¸€å‘¨ï¼ˆæœ¬å‘¨ï¼Œä¸Šå‘¨ï¼Œä¸‹å‘¨ï¼‰çš„å¼€å§‹ç»“æŸæ—¶é—´ï¼Œä¸€å‘¨ä»Žå‘¨æ—¥å¼€å§‹åˆ°å‘¨å…­ç»“æŸã€‚
// æœ¬å‘¨
function getCurrWeekDays () {
let date = moment()
return getDuringTime(date, 'week', 'YYYY-MM-DD')
}
// ä¸Šä¸€å‘¨
function getLastWeekDays () {
let date = moment().week(moment().week() - 1)
return getDuringTime(date, 'week', 'YYYY-MM-DD')
}
// ä¸‹ä¸€å‘¨
function getNextWeekDays () {
let date = moment().week(moment().week() + 1)
return getDuringTime(date, 'week', 'YYYY-MM-DD')
}
// æœ¬æœˆ
function getCurrMonthDays () {
let date = moment()
return getDuringTime(date, 'month', 'YYYY-MM-DD')
}
// ä¸Šä¸ªæœˆ
function getLastMonthDays () {
let date = moment().month(moment().month() - 1)
return getDuringTime(date, 'month', 'YYYY-MM-DD')
}
// ä¸‹ä¸ªæœˆ
function getNextMonthDays () {
let date = moment().month(moment().month() + 1)
return getDuringTime(date, 'month', 'YYYY-MM-DD')
}
// å½“å‰å­£åº¦
function getCurrQuarter () {
let date = moment()
return getDuringTime(date, 'quarter', 'YYYY-MM-DD')
}
// ä¸Šä¸ªå­£åº¦
function getLastQuarter () {
let date = moment().quarter(moment().quarter() - 1)
return getDuringTime(date, 'quarter', 'YYYY-MM-DD')
}
// ä¸‹ä¸ªå­£åº¦
function getLastQuarter () {
let date = moment().quarter(moment().quarter() + 1)
return getDuringTime(date, 'quarter', 'YYYY-MM-DD')
}
&lt;/code>&lt;/pre>
&lt;hr>
&lt;p>æœ¬æ–‡å®Œï¼Œæ„Ÿè°¢é˜…è¯»ã€‚ðŸ˜œ&lt;/p></description></item></channel></rss>